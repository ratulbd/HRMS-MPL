<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HR Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/src/index.css"> <style>
        /* Minimal styles if needed, prefer index.css */
        .modal-backdrop { background-color: rgba(0, 0, 0, 0.5); }
        .modal { transition: opacity 0.3s ease, transform 0.3s ease; }
    </style>
</head>
<body class="bg-gray-100 text-gray-900">

    <div id="loadingOverlay" class="fixed inset-0 bg-gray-100 bg-opacity-75 flex items-center justify-center z-[110]">
        <div class="spinner"></div>
    </div>

    <nav class="bg-white shadow-sm sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-xl font-bold text-indigo-600">HR Management System</span>
                </div>
                <div class="flex items-center space-x-2">
                    <button id="uploadAttendanceBtn" class="btn btn-green text-sm">Generate Salary Sheet</button>
                    <button id="bulkUploadBtn" class="btn btn-teal text-sm">Bulk Upload</button>
                    <button id="exportDataBtn" class="btn btn-secondary text-sm">Export Data</button>
                    <button id="viewSheetsBtn" class="btn btn-secondary text-sm">Past Sheets</button>
                    <button id="addEmployeeBtn" class="btn btn-primary text-sm">Add New Employee</button>
                </div>
            </div>
        </div>
    </nav>

    <div id="app" class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <header class="mb-6">
            <h1 class="text-2xl font-semibold text-gray-800">Employee Dashboard</h1>
            <p class="text-gray-500 mt-1">View and manage your employee data.</p>
        </header>

        <div class="bg-white p-6 rounded-lg shadow-md mb-8">
             <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                <div>
                    <label for="filterName" class="block text-sm font-medium text-gray-600">Search by Name/ID</label>
                    <input type="text" id="filterName" class="mt-1 block w-full input" placeholder="e.g. John Doe or 123">
                </div>
                <div>
                    <label for="filterStatus" class="block text-sm font-medium text-gray-600">Status</label>
                    <select id="filterStatus" class="mt-1 block w-full input-select">
                        <option value="">All</option> <option value="Active">Active</option> <option value="Salary Held">Salary Held</option> <option value="Resigned">Resigned</option> <option value="Terminated">Terminated</option>
                    </select>
                </div>
                <div>
                    <label for="filterDesignation" class="block text-sm font-medium text-gray-600">Designation</label>
                    <select id="filterDesignation" class="mt-1 block w-full input-select">
                        <option value="">All</option>
                    </select>
                </div>
                <div>
                    <label for="filterType" class="block text-sm font-medium text-gray-600">Employee Type</label>
                    <select id="filterType" class="mt-1 block w-full input-select">
                        <option value="">All</option> <option>Permanent</option> <option>Casual</option> <option>Contractual</option> <option>Temporary</option>
                    </select>
                </div>
            </div>
            <div class="mt-4 text-right">
                <button id="resetFiltersBtn" class="text-sm font-medium text-indigo-600 hover:text-indigo-800">Reset Filters</button>
            </div>
             <style jsx>{` /* Basic Input Styles (can move to index.css) */
                .input, .input-select { padding: 0.5rem 0.75rem; border: 1px solid #d1d5db; border-radius: 0.375rem; box-shadow: 0 1px 2px 0 rgba(0,0,0,0.05); outline: none;}
                .input:focus, .input-select:focus { border-color: #4f46e5; ring: 1px; ring-color: #4f46e5; }
                .input-select { appearance: none; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e"); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em; padding-right: 2.5rem; }
             `}</style>
        </div>

        <main id="employee-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div id="initialLoading" class="col-span-full text-center p-8">
                <div class="spinner mx-auto"></div>
                <p class="text-gray-500 mt-2">Loading employee data...</p>
            </div>
            </main>
    </div>

    <div id="employeeModal" class="fixed inset-0 z-50 flex items-center justify-center modal-backdrop hidden p-4">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-2xl modal max-h-[90vh] flex flex-col" id="employeeModalContent">
            <div class="flex justify-between items-center p-6 border-b">
                 <h2 id="modalTitle" class="text-2xl font-bold text-gray-900">Add New Employee</h2>
                 <button type="button" id="cancelEmployeeModal_top" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
             </div>
             <form id="employeeForm" class="flex-grow overflow-y-auto p-6">
                  <input type="hidden" id="employeeDocId">
                  <input type="hidden" id="employeeStatus">
                  <input type="hidden" id="employeeSalaryHeld">
                  <input type="hidden" id="separationDateHidden">
                  <input type="hidden" id="remarksHidden">
                  <input type="hidden" id="originalEmployeeIdHidden">
                  <input type="hidden" id="holdTimestampHidden">
                  <div class="space-y-6">
                      {/* Sections go here */}
                      <div>
                          <h3 class="text-lg font-medium text-gray-900 border-b pb-2 mb-4">Basic Information</h3>
                           <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                               <div><label for="employeeId" class="block text-sm font-medium text-gray-700">Employee ID</label><input type="text" id="employeeId" required class="mt-1 block w-full input"></div>
                               <div><label for="name" class="block text-sm font-medium text-gray-700">Employee Name</label><input type="text" id="name" required class="mt-1 block w-full input"></div>
                               {/* ... other fields ... */}
                           </div>
                       </div>
                       {/* ... other sections ... */}
                        <div>
                          <h3 class="text-lg font-medium text-gray-900 border-b pb-2 mb-4">Salary Details</h3>
                           <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                              <div><label for="salary" class="block text-sm font-medium text-gray-700">Gross Salary</label><input type="number" id="salary" required class="mt-1 block w-full input"></div>
                              <div><label for="bankAccount" class="block text-sm font-medium text-gray-700">Bank Account Number</label><input type="text" id="bankAccount" class="mt-1 block w-full input"></div>
                          </div>
                      </div>
                  </div>
                  <div class="mt-8 flex justify-end gap-4 flex-shrink-0 pt-6 border-t">
                      <button type="button" id="cancelEmployeeModal" class="btn btn-secondary">Cancel</button>
                      <button type="submit" class="btn btn-primary">Save Employee</button>
                  </div>
             </form>
         </div>
    </div>

    <div id="bulkUploadModal" class="fixed inset-0 z-50 flex items-center justify-center modal-backdrop hidden">
        <div class="bg-white rounded-lg shadow-2xl p-8 w-full max-w-lg modal">
            <h2 class="text-2xl font-bold mb-2">Bulk Upload Employees</h2>
             {/* ... content ... */}
             <div class="mt-8 flex justify-between items-center gap-4">
                 <button type="button" id="downloadTemplateBtn" class="text-sm font-medium text-indigo-600 hover:text-indigo-800">Download Template</button>
                 <div class="flex gap-4">
                     <button type="button" id="cancelBulkUploadModal" class="btn btn-secondary">Cancel</button>
                     <button type="submit" form="bulkUploadForm" class="btn btn-teal">Upload & Save</button>
                 </div>
             </div>
         </div>
    </div>

    <div id="statusChangeModal" class="fixed inset-0 z-50 flex items-center justify-center modal-backdrop hidden">
        <div class="bg-white rounded-lg shadow-2xl p-8 w-full max-w-md modal">
             <h2 id="statusChangeTitle" class="text-2xl font-bold mb-6">Update Employee Status</h2>
             <form id="statusChangeForm">
                  {/* ... fields ... */}
                 <div class="mt-8 flex justify-end gap-4">
                     <button type="button" id="cancelStatusChangeModal" class="btn btn-secondary">Cancel</button>
                     <button type="submit" class="btn btn-primary">Update Status</button>
                 </div>
             </form>
         </div>
    </div>

    <div id="viewDetailsModal" class="fixed inset-0 z-50 flex items-center justify-center modal-backdrop hidden p-4">
        <div class="bg-white rounded-lg shadow-2xl p-8 w-full max-w-3xl modal max-h-[90vh] flex flex-col">
             <h2 class="text-2xl font-bold mb-6 flex-shrink-0 text-gray-900">Employee Details</h2>
             <div id="viewDetailsContent" class="flex-grow overflow-y-auto pr-4"></div>
             <div class="mt-8 flex justify-end gap-4 flex-shrink-0 pt-4 border-t">
                 <button type="button" id="closeViewDetailsModal" class="btn btn-secondary">Close</button>
             </div>
         </div>
    </div>

    <div id="attendanceModal" class="fixed inset-0 z-50 flex items-center justify-center modal-backdrop hidden">
        <div class="bg-white rounded-lg shadow-2xl p-8 w-full max-w-md modal">
            <h2 class="text-2xl font-bold mb-6">Generate Salary Sheet</h2>
             <form id="attendanceForm">
                  {/* ... fields ... */}
                 <div class="mt-8 flex justify-end gap-4">
                     <button type="button" id="cancelAttendanceModal" class="btn btn-secondary">Cancel</button>
                     <button type="submit" class="btn btn-green">Generate Sheet</button>
                 </div>
             </form>
         </div>
    </div>

    <div id="salarySheetModal" class="fixed inset-0 z-50 flex items-center justify-center modal-backdrop hidden p-4">
        <div class="bg-white rounded-lg shadow-2xl p-8 w-full max-w-5xl modal h-full max-h-[90vh] flex flex-col">
             {/* ... header ... */}
             <div class="flex-grow overflow-y-auto border rounded-lg">
                 <table class="min-w-full divide-y divide-gray-200">
                     <thead class="bg-gray-50">{/* ... headers ... */}</thead>
                     <tbody id="salarySheetBody" class="bg-white divide-y divide-gray-200"></tbody>
                 </table>
             </div>
             <div class="mt-8 flex justify-end gap-4 flex-shrink-0">
                 <button type="button" id="closeSheetModal" class="btn btn-secondary">Close</button>
             </div>
         </div>
    </div>

    <div id="viewSheetsModal" class="fixed inset-0 z-50 flex items-center justify-center modal-backdrop hidden p-4">
        <div class="bg-white rounded-lg shadow-2xl p-8 w-full max-w-2xl modal h-full max-h-[90vh] flex flex-col">
            <h2 class="text-2xl font-bold mb-6 flex-shrink-0">Past Salary Sheets</h2>
             <div id="pastSheetsList" class="flex-grow overflow-y-auto space-y-3"></div>
             <div class="mt-8 flex justify-end gap-4 flex-shrink-0">
                 <button type="button" id="closePastSheetsModal" class="btn btn-secondary">Close</button>
             </div>
         </div>
    </div>

    <div id="alertModal" class="fixed inset-0 z-[100] flex items-center justify-center modal-backdrop hidden">
        <div class="bg-white rounded-lg shadow-2xl p-8 w-full max-w-sm modal text-center">
             <h3 id="alertTitle" class="text-xl font-bold mb-4"></h3>
             <p id="alertMessage" class="text-gray-600 mb-6"></p>
             <button id="alertOkBtn" class="btn btn-primary w-full">OK</button>
         </div>
    </div>

    <div id="confirmModal" class="fixed inset-0 z-[100] flex items-center justify-center modal-backdrop hidden">
        <div class="bg-white rounded-lg shadow-2xl p-8 w-full max-w-sm modal text-center">
             <h3 id="confirmTitle" class="text-xl font-bold mb-4">Confirmation</h3>
             <p id="confirmMessage" class="text-gray-600 mb-6"></p>
             <div class="flex justify-center gap-4">
                 <button id="confirmCancelBtn" class="btn btn-secondary w-1/2">Cancel</button>
                 <button id="confirmOkBtn" class="btn btn-danger w-1/2">Confirm</button>
             </div>
         </div>
    </div>


    <script type="module" src="js/main.js"></script>
</body>
</html>